---
title: "Practicum I CS5200"
author: "Marin Witherspoon and Sumit Hawal"
date: "Summer Full 2023"
---

```{r, Limport}
library(RMySQL)
```

## Connect to Database

```{r, connect}
# connect to database hosted on db4free server
dbcon <-  dbConnect(RMySQL::MySQL(), 
                   user = 'sql9627833', 
                   password = 'sLilTKEpTh',
                   dbname = 'sql9627833', 
                   host = 'sql9.freemysqlhosting.net', 
                   port = 3306)
```

## Create Database

### A

Drops the table if necessary
```{sql 4A1, connection=dbcon}
DROP TABLE IF EXISTS flights;
```
Creates tables with the necessary column restrictions
# ADD FORGEN KEY CONNECTION TO TABLE CREATION!
```{sql 4A2, connection=dbcon}
CREATE TABLE flights (
  fid INTEGER PRIMARY KEY,
  date DATE,
  origin INTEGER,
  airline TEXT,
  aircraft TEXT,
  altitude INTEGER,
  heavy BOOLEAN
  CHECK (altitude > 0));
```
### B
/* my changes  copy code from here */

```{sql 4B1, connection=dbcon}
DROP TABLE IF EXISTS airports;
```

```{sql 4B2, connection=dbcon}
CREATE TABLE airports (
  aid INT PRIMARY KEY ,
  airportState TEXT,
  airportCode TEXT DEFAULT NULL   /*can be left empty as mentioned in the question*/
);
```

### C

```{sql 4C, connection = dbcon}
ALTER TABLE flights ADD FOREIGN KEY (origin) REFERENCES airports(aid);
```

### D

```{sql connection=dbcon}
drop table if exists conditions;
```

```{sql 4D, connection= dbcon}
/* look up  table after creating strikes table */
/* assuming the cid here is synthetic key*/

CREATE TABLE conditions (
    cid INT AUTO_INCREMENT PRIMARY KEY,
    sky_condition VARCHAR(255),
    explanation TEXT
)
```

### E

```{sql 4E, connection=dbcon }
/* assuming the conditions are text that connect to sky_conditions */

CREATE TABLE strikes (
  sid INTEGER PRIMARY KEY,
  fid INTEGER,
  numbirds INTEGER,
  impact TEXT,
  damage BOOLEAN,
  altitude INTEGER CHECK (altitude >= 0),
  conditions INTEGER REFERENCES conditions (cid)
);

/* confusion about the first strike thing */
/* conditions column as well */
```

### F

```{sql 4F, connection=dbcon }
ALTER TABLE strikes ADD FOREIGN KEY (fid) REFERENCES flights(fid)
```

### G

```{sql 4G, connection=dbcon, eval =F}
/* evaluating our tables by adding random data */

```

